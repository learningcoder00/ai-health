# ğŸ¥ AIå¥åº·ç®¡å®¶

ä¸€æ¬¾åŸºäº React Native + Expo å¼€å‘çš„æ™ºèƒ½å¥åº·ç®¡ç†åº”ç”¨ï¼Œé›†æˆäº† AI åŠ©æ‰‹ã€ç”¨è¯ç®¡ç†ã€å¥åº·æ•°æ®è¿½è¸ªã€äº‘ç«¯åŒæ­¥ç­‰åŠŸèƒ½ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸ¤– AI æ™ºèƒ½åŠ©æ‰‹
- **å¥åº·é—®ç­”**ï¼šåŸºäº SiliconFlow AI çš„å¥åº·å’¨è¯¢æœåŠ¡
- **è¯ç‰©ç›¸äº’ä½œç”¨æ£€æŸ¥**ï¼šæ™ºèƒ½åˆ†æå¤šç§è¯ç‰©çš„ç›¸äº’ä½œç”¨é£é™©
- **ä¸ªæ€§åŒ–å¥åº·å»ºè®®**ï¼šæ ¹æ®ç”¨æˆ·æ•°æ®ç”Ÿæˆå®šåˆ¶åŒ–å»ºè®®

### ğŸ’Š ç”¨è¯ç®¡ç†
- **OCR è¯†åˆ«**ï¼šæ‹ç…§è¯†åˆ«è¯å“åŒ…è£…ç›’ï¼Œè‡ªåŠ¨æå–è¯å“ä¿¡æ¯ï¼ˆç™¾åº¦ OCRï¼‰
- **æ™ºèƒ½æé†’**ï¼šæ”¯æŒå¤šç§ç”¨è¯æ¨¡å¼ï¼ˆå›ºå®šæ—¶é—´/æ¯æ—¥Næ¬¡/é—´éš”å°æ—¶/æŒ‰éœ€ç”¨è¯ï¼‰
- **åº“å­˜ç®¡ç†**ï¼šè¯å“åº“å­˜è¿½è¸ªã€åˆ°æœŸæé†’ã€ä½åº“å­˜æé†’
- **ç”¨è¯å†å²**ï¼šå®Œæ•´çš„æœè¯è®°å½•å’Œç»Ÿè®¡åˆ†æ
- **æ•°æ®å¯¼å‡º**ï¼šæ”¯æŒå¯¼å‡ºè¯å“ä¿¡æ¯ä¸º CSV æ–‡ä»¶

### ğŸ“Š å¥åº·æ•°æ®
- **å¤šç»´åº¦ç›‘æµ‹**ï¼šå¿ƒç‡ã€è¡€å‹ã€è¡€ç³–ã€ç¡çœ ã€è¿åŠ¨ç­‰
- **å¯è§†åŒ–å›¾è¡¨**ï¼šè¶‹åŠ¿åˆ†æå’Œæ•°æ®å¯¹æ¯”
- **è®¾å¤‡æ•°æ®å¯¼å…¥**ï¼šæ”¯æŒä»æ™ºèƒ½æ‰‹è¡¨ç­‰è®¾å¤‡å¯¼å…¥æ•°æ®

### ğŸ“± å¥åº·æŠ¥å‘Š
- **AI åˆ†æ**ï¼šåŸºäºå¥åº·æ•°æ®ç”Ÿæˆæ™ºèƒ½åˆ†ææŠ¥å‘Š
- **è¶‹åŠ¿é¢„æµ‹**ï¼šå¥åº·æŒ‡æ ‡çš„è¶‹åŠ¿åˆ†æ

### â˜ï¸ äº‘ç«¯åŒæ­¥
- **è‡ªåŠ¨åŒæ­¥**ï¼šæ•°æ®ä¿®æ”¹åè‡ªåŠ¨ä¸Šä¼ åˆ°äº‘ç«¯ï¼ˆ2.5ç§’é˜²æŠ–ï¼‰
- **ç”¨æˆ·éš”ç¦»**ï¼šæ¯ä¸ªç”¨æˆ·çš„æ•°æ®å®Œå…¨éš”ç¦»ï¼Œç™»å½•æ—¶è‡ªåŠ¨ä¸‹è½½
- **å†²çªå¤„ç†**ï¼šæ™ºèƒ½å†²çªæ£€æµ‹å’Œè§£å†³æœºåˆ¶
- **è´¦å·ç®¡ç†**ï¼šæ³¨å†Œã€ç™»å½•ã€ä¿®æ”¹å¯†ç ã€æ³¨é”€è´¦å·

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### å‰ç«¯
- **React Native** 0.72.10 - è·¨å¹³å°ç§»åŠ¨åº”ç”¨æ¡†æ¶
- **Expo** ~49.0.0 - React Native å¼€å‘å·¥å…·é“¾
- **React Navigation** - è·¯ç”±å¯¼èˆª
- **React Native Paper** - Material Design UI ç»„ä»¶åº“
- **React Native SVG** - SVG å›¾æ ‡æ”¯æŒ

### åç«¯æœåŠ¡
- **Node.js** - è¿è¡Œç¯å¢ƒ
- **SQLite (better-sqlite3)** - äº‘ç«¯æ•°æ®å­˜å‚¨
- **JWT** - ç”¨æˆ·è®¤è¯

### AI & API é›†æˆ
- **SiliconFlow API** - AI å¤§è¯­è¨€æ¨¡å‹
- **Baidu OCR API** - æ–‡å­—è¯†åˆ«
- **å¤šä¸ªè¯å“æ•°æ®åº“ API** - è¯å“ä¿¡æ¯æŸ¥è¯¢ï¼ˆèšåˆã€å¤©è¡Œã€ä¸‡ç»´ã€æé€Ÿï¼‰

## ğŸ“‹ ç¯å¢ƒè¦æ±‚

- **Node.js** >= 14.0.0
- **npm** æˆ– **yarn**
- **Expo CLI** (è‡ªåŠ¨å®‰è£…)
- **æµè§ˆå™¨** (Web ç‰ˆå¼€å‘)
- **Xcode** (iOS å¼€å‘ï¼Œä»… macOS)
- **Android Studio** (Android å¼€å‘)

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1ï¸âƒ£ å…‹éš†é¡¹ç›®

```bash
git clone <your-repo-url>
cd è½¯ä»¶å¤§èµ›
```

### 2ï¸âƒ£ å®‰è£…ä¾èµ–

```bash
npm install
```

### 3ï¸âƒ£ é…ç½®ç¯å¢ƒå˜é‡

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.env` æ–‡ä»¶ï¼š

```env
# SiliconFlow AI API
EXPO_PUBLIC_SILICONFLOW_API_KEY=your_siliconflow_api_key
SILICONFLOW_API_KEY=your_siliconflow_api_key

# äº‘ç«¯æœåŠ¡å™¨åœ°å€
EXPO_PUBLIC_CLOUD_API_BASE_URL=http://localhost:4000

# ç™¾åº¦ OCR APIï¼ˆå¯é€‰ï¼‰
BAIDU_OCR_API_KEY=your_baidu_ocr_api_key
BAIDU_OCR_SECRET_KEY=your_baidu_ocr_secret_key

# è¯å“æ•°æ®åº“ APIï¼ˆå¯é€‰ï¼‰
JUHE_API_KEY=your_juhe_api_key
TIANAPI_KEY=your_tianapi_key
WANWEI_API_KEY=your_wanwei_api_key
JISU_API_KEY=your_jisu_api_key
```

> **æ³¨æ„**ï¼šè‡³å°‘éœ€è¦é…ç½® `SILICONFLOW_API_KEY` æ‰èƒ½ä½¿ç”¨ AI åŠŸèƒ½ã€‚

### 4ï¸âƒ£ å¯åŠ¨é¡¹ç›®

#### ğŸŒ Web ç‰ˆï¼ˆæ¨èå¼€å‘æ—¶ä½¿ç”¨ï¼‰

```bash
# å¯åŠ¨ Expo å¼€å‘æœåŠ¡å™¨
npm start

# åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼ˆæŒ‰ 'w' æˆ–è®¿é—® http://localhost:19006ï¼‰
```

#### ğŸ“± ç§»åŠ¨ç«¯

```bash
# å¯åŠ¨ Expo å¼€å‘æœåŠ¡å™¨
npm start

# iOS æ¨¡æ‹Ÿå™¨ï¼ˆä»… macOSï¼‰
æŒ‰ 'i'

# Android æ¨¡æ‹Ÿå™¨
æŒ‰ 'a'

# ä½¿ç”¨ Expo Go æ‰«æäºŒç»´ç 
åœ¨æ‰‹æœºä¸Šå®‰è£… Expo Goï¼Œæ‰«æç»ˆç«¯ä¸­çš„äºŒç»´ç 
```

### 5ï¸âƒ£ å¯åŠ¨äº‘ç«¯æœåŠ¡ï¼ˆå¿…éœ€ï¼‰

**æ–¹å¼ä¸€ï¼šæœ¬åœ°å¼€å‘**

```bash
# å¯åŠ¨æœ¬åœ°äº‘ç«¯æœåŠ¡å™¨
npm run cloud

# æœåŠ¡å™¨å°†è¿è¡Œåœ¨ http://localhost:4000
```

**æ–¹å¼äºŒï¼šéƒ¨ç½²åˆ°è¿œç¨‹æœåŠ¡å™¨**

å‚è§ä¸‹æ–¹ [äº‘ç«¯æœåŠ¡å™¨éƒ¨ç½²](#â˜ï¸-äº‘ç«¯æœåŠ¡å™¨éƒ¨ç½²) ç« èŠ‚ã€‚

### 6ï¸âƒ£ å¯åŠ¨ä»£ç†æœåŠ¡å™¨ï¼ˆWeb å¼€å‘éœ€è¦ï¼‰

```bash
# æ–°å¼€ä¸€ä¸ªç»ˆç«¯çª—å£
npm run proxy

# ä»£ç†æœåŠ¡å™¨å°†è¿è¡Œåœ¨ http://localhost:3001
```

> **ä¸ºä»€ä¹ˆéœ€è¦ä»£ç†ï¼Ÿ** Web ç‰ˆéœ€è¦ä»£ç†æœåŠ¡å™¨æ¥é¿å… CORS å’Œ Mixed Content é—®é¢˜ï¼ˆç¬¬ä¸‰æ–¹ API è°ƒç”¨ï¼‰ã€‚

## â˜ï¸ äº‘ç«¯æœåŠ¡å™¨éƒ¨ç½²

### Ubuntu æœåŠ¡å™¨éƒ¨ç½²æ­¥éª¤

#### 1. ä¸Šä¼ æ–‡ä»¶åˆ°æœåŠ¡å™¨

```bash
# å‹ç¼©äº‘ç«¯ç›¸å…³æ–‡ä»¶
tar -czf cloud_deploy.tgz cloud-server.js cloud/ package.json package-lock.json

# ä¸Šä¼ åˆ°æœåŠ¡å™¨
scp cloud_deploy.tgz user@your-server-ip:/path/to/deploy
```

#### 2. åœ¨æœåŠ¡å™¨ä¸Šå®‰è£…ä¾èµ–

```bash
ssh user@your-server-ip
cd /path/to/deploy
tar -xzf cloud_deploy.tgz

# å®‰è£… Node.jsï¼ˆå¦‚æœæœªå®‰è£…ï¼‰
sudo apt update
sudo apt install nodejs npm

# å®‰è£…ä¾èµ–
npm ci --production
```

#### 3. é…ç½®ç¯å¢ƒå˜é‡

```bash
# åˆ›å»º .env æ–‡ä»¶
cat > .env << 'EOF'
CLOUD_PORT=4000
CLOUD_JWT_SECRET=your_random_secret_key_here
CLOUD_DB_PATH=./cloud-data/cloud.db
EOF
```

#### 4. é…ç½® systemd æœåŠ¡ï¼ˆæŒä¹…åŒ–è¿è¡Œï¼‰

```bash
sudo nano /etc/systemd/system/ai-health-cloud.service
```

å†™å…¥ä»¥ä¸‹å†…å®¹ï¼š

```ini
[Unit]
Description=AI Health Cloud Server
After=network.target

[Service]
Type=simple
User=your-username
WorkingDirectory=/path/to/deploy
Environment="NODE_ENV=production"
ExecStart=/usr/bin/node cloud-server.js
Restart=on-failure
RestartSec=10

[Install]
WantedBy=multi-user.target
```

å¯åŠ¨æœåŠ¡ï¼š

```bash
sudo systemctl daemon-reload
sudo systemctl enable ai-health-cloud
sudo systemctl start ai-health-cloud
sudo systemctl status ai-health-cloud
```

#### 5. æ›´æ–°å®¢æˆ·ç«¯é…ç½®

ä¿®æ”¹æœ¬åœ°é¡¹ç›®çš„ `app.json`ï¼š

```json
{
  "expo": {
    "extra": {
      "CLOUD_API_BASE_URL": "http://your-server-ip:4000",
      "SILICONFLOW_API_KEY": "your_api_key"
    }
  }
}
```

æˆ–è€…ä¿®æ”¹ `.env` æ–‡ä»¶ï¼š

```env
EXPO_PUBLIC_CLOUD_API_BASE_URL=http://your-server-ip:4000
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
è½¯ä»¶å¤§èµ›/
â”œâ”€â”€ App.js                      # åº”ç”¨å…¥å£
â”œâ”€â”€ app.json                    # Expo é…ç½®
â”œâ”€â”€ package.json                # ä¾èµ–é…ç½®
â”œâ”€â”€ webpack.config.js           # Web æ‰“åŒ…é…ç½®
â”œâ”€â”€ proxy-server.js             # Web ä»£ç†æœåŠ¡å™¨
â”œâ”€â”€ cloud-server.js             # äº‘ç«¯æ•°æ®æœåŠ¡å™¨
â”œâ”€â”€ assets/                     # é™æ€èµ„æº
â”‚   â”œâ”€â”€ bk_1.png               # èƒŒæ™¯å›¾
â”‚   â”œâ”€â”€ logo_1.png             # Logo
â”‚   â””â”€â”€ logo_2.png             # Header Logo
â”œâ”€â”€ cloud/                      # äº‘ç«¯æœåŠ¡æ¨¡å—
â”‚   â””â”€â”€ db.js                  # SQLite æ•°æ®åº“æ“ä½œ
â”œâ”€â”€ cloud-data/                 # äº‘ç«¯æ•°æ®å­˜å‚¨
â”‚   â””â”€â”€ cloud.db               # SQLite æ•°æ®åº“æ–‡ä»¶
â””â”€â”€ src/
    â”œâ”€â”€ components/            # å¯å¤ç”¨ç»„ä»¶
    â”‚   â””â”€â”€ AIIcon.js         # AI æœºå™¨äººå›¾æ ‡
    â”œâ”€â”€ config/               # é…ç½®æ–‡ä»¶
    â”‚   â”œâ”€â”€ ai.js            # AI æœåŠ¡é…ç½®
    â”‚   â”œâ”€â”€ baiduOCR.js      # ç™¾åº¦ OCR é…ç½®
    â”‚   â”œâ”€â”€ cloud.js         # äº‘ç«¯æœåŠ¡é…ç½®
    â”‚   â”œâ”€â”€ medicineDB.js    # è¯å“æ•°æ®åº“é…ç½®
    â”‚   â””â”€â”€ webProxy.js      # Web ä»£ç†é…ç½®
    â”œâ”€â”€ screens/              # é¡µé¢ç»„ä»¶
    â”‚   â”œâ”€â”€ AIScreen.js      # AI åŠ©æ‰‹é¡µé¢
    â”‚   â”œâ”€â”€ AuthScreen.js    # ç™»å½•/æ³¨å†Œé¡µé¢
    â”‚   â”œâ”€â”€ DeviceScreen.js  # å¥åº·æ•°æ®é¡µé¢
    â”‚   â”œâ”€â”€ HomeScreen.js    # é¦–é¡µ
    â”‚   â”œâ”€â”€ MedicineScreen.js # è¯å“ç®¡ç†é¡µé¢
    â”‚   â””â”€â”€ ReportScreen.js  # å¥åº·æŠ¥å‘Šé¡µé¢
    â”œâ”€â”€ services/             # ä¸šåŠ¡é€»è¾‘æœåŠ¡
    â”‚   â”œâ”€â”€ AIService.js           # AI æœåŠ¡
    â”‚   â”œâ”€â”€ AuthService.js         # è®¤è¯æœåŠ¡
    â”‚   â”œâ”€â”€ AutoCloudSyncService.js # è‡ªåŠ¨äº‘åŒæ­¥
    â”‚   â”œâ”€â”€ CloudSyncService.js    # æ‰‹åŠ¨äº‘åŒæ­¥
    â”‚   â”œâ”€â”€ DeviceService.js       # è®¾å¤‡æ•°æ®æœåŠ¡
    â”‚   â”œâ”€â”€ EncryptionService.js   # åŠ å¯†æœåŠ¡
    â”‚   â”œâ”€â”€ ExportService.js       # æ•°æ®å¯¼å‡ºæœåŠ¡
    â”‚   â”œâ”€â”€ KeyManager.js          # å¯†é’¥ç®¡ç†
    â”‚   â”œâ”€â”€ MedicineDBService.js   # è¯å“æ•°æ®åº“æŸ¥è¯¢
    â”‚   â”œâ”€â”€ MedicineService.js     # è¯å“ç®¡ç†æœåŠ¡
    â”‚   â”œâ”€â”€ OCRService.js          # OCR è¯†åˆ«æœåŠ¡
    â”‚   â””â”€â”€ ReportService.js       # æŠ¥å‘Šç”ŸæˆæœåŠ¡
    â”œâ”€â”€ utils/                # å·¥å…·å‡½æ•°
    â”‚   â”œâ”€â”€ secureStorage.js  # å®‰å…¨å­˜å‚¨ï¼ˆåŠ å¯†ï¼‰
    â”‚   â”œâ”€â”€ storage.js        # æ™®é€šå­˜å‚¨
    â”‚   â”œâ”€â”€ validation.js     # æ•°æ®éªŒè¯
    â”‚   â””â”€â”€ webStorage.js     # Web å­˜å‚¨é€‚é…
    â””â”€â”€ theme.js              # ä¸»é¢˜é…ç½®
```

## ğŸ”‘ API å¯†é’¥è·å–

### SiliconFlow APIï¼ˆå¿…éœ€ï¼‰
1. è®¿é—® [SiliconFlow å®˜ç½‘](https://siliconflow.cn/)
2. æ³¨å†Œè´¦å·å¹¶ç™»å½•
3. è¿›å…¥æ§åˆ¶å°åˆ›å»º API Key
4. å¤åˆ¶ API Key åˆ° `.env` æ–‡ä»¶

### ç™¾åº¦ OCR APIï¼ˆå¯é€‰ï¼‰
1. è®¿é—® [ç™¾åº¦æ™ºèƒ½äº‘](https://cloud.baidu.com/)
2. åˆ›å»ºæ–‡å­—è¯†åˆ«åº”ç”¨
3. è·å– API Key å’Œ Secret Key

### è¯å“æ•°æ®åº“ APIï¼ˆå¯é€‰ï¼‰
- [èšåˆæ•°æ®](https://www.juhe.cn/)
- [å¤©è¡Œæ•°æ®](https://www.tianapi.com/)
- ä¸‡ç»´æ•°æ®
- æé€Ÿæ•°æ®

## ğŸ› å¸¸è§é—®é¢˜

### 1. `npm install` å¤±è´¥

```bash
# æ¸…é™¤ç¼“å­˜é‡è¯•
npm cache clean --force
rm -rf node_modules package-lock.json
npm install
```

### 2. Expo å¯åŠ¨å¤±è´¥

```bash
# é‡ç½® Expo ç¼“å­˜
npx expo start -c
```

### 3. Web ç‰ˆ CORS é”™è¯¯

ç¡®ä¿ `proxy-server.js` æ­£åœ¨è¿è¡Œï¼š

```bash
npm run proxy
```

### 4. äº‘ç«¯è¿æ¥å¤±è´¥

- æ£€æŸ¥ `EXPO_PUBLIC_CLOUD_API_BASE_URL` é…ç½®æ˜¯å¦æ­£ç¡®
- ç¡®ä¿äº‘ç«¯æœåŠ¡å™¨æ­£åœ¨è¿è¡Œï¼š`npm run cloud`
- æµ‹è¯•è¿æ¥ï¼š`curl http://localhost:4000/health`

### 5. AI æœåŠ¡æœªé…ç½®

- æ£€æŸ¥ `.env` æ–‡ä»¶ä¸­çš„ `EXPO_PUBLIC_SILICONFLOW_API_KEY`
- æˆ–åœ¨ `app.json` ä¸­é…ç½® `expo.extra.SILICONFLOW_API_KEY`

### 6. å›¾ç‰‡èµ„æºåŠ è½½å¤±è´¥

Web ç‰ˆå¼€å‘æ—¶å›¾ç‰‡å¯èƒ½åŠ è½½å¤±è´¥ï¼Œè¿™æ˜¯æ­£å¸¸çš„ã€‚åœ¨ç”Ÿäº§æ„å»ºæˆ–ç§»åŠ¨ç«¯ä¸ä¼šæœ‰æ­¤é—®é¢˜ã€‚

### 7. æµè§ˆå™¨æ ‡ç­¾æ˜¾ç¤º "undefined"

åˆ·æ–°æµè§ˆå™¨æˆ–é‡å¯ Expo Web æœåŠ¡å™¨ï¼š

```bash
# Ctrl+C åœæ­¢æœåŠ¡
npm start
# æŒ‰ 'w' æ‰“å¼€ Web
```

## ğŸ“± æ„å»ºç”Ÿäº§ç‰ˆæœ¬

### Web ç‰ˆ

```bash
npx expo export:web
# è¾“å‡ºç›®å½•ï¼šweb-build/
```

### Android APK

```bash
# å®‰è£… EAS CLI
npm install -g eas-cli

# ç™»å½• Expo è´¦å·
eas login

# æ„å»º APK
eas build -p android --profile preview
```

### iOS IPA

```bash
# éœ€è¦ Apple Developer è´¦å·
eas build -p ios --profile preview
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ‘¨â€ğŸ’» å¼€å‘è€…

- é¡¹ç›®ä½œè€…ï¼š[Your Name]
- è”ç³»æ–¹å¼ï¼š[Your Email]

## ğŸ™ è‡´è°¢

- [Expo](https://expo.dev/) - è·¨å¹³å°å¼€å‘æ¡†æ¶
- [SiliconFlow](https://siliconflow.cn/) - AI æœåŠ¡æä¾›å•†
- [React Native Paper](https://callstack.github.io/react-native-paper/) - UI ç»„ä»¶åº“
- [ç™¾åº¦æ™ºèƒ½äº‘](https://cloud.baidu.com/) - OCR æœåŠ¡

---

**æ³¨æ„**ï¼šæœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ äº¤æµä½¿ç”¨ï¼Œç”Ÿæˆçš„å¥åº·å»ºè®®ä¸èƒ½æ›¿ä»£ä¸“ä¸šåŒ»ç–—æ„è§ï¼Œé‡è¦é—®é¢˜è¯·å’¨è¯¢åŒ»ç”Ÿã€‚
